---
import Layout from '../../layouts/Layout.astro';
import { getBlogPostsSorted } from '../../content.config';
import type {
  GetStaticPathsOptions,
  InferGetStaticParamsType,
  InferGetStaticPropsType,
} from 'astro';
import Post from '../../components/Post.astro';

export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
  const posts = await getBlogPostsSorted();
  return paginate(posts, {
    pageSize: 5,
  });
}

type Params = InferGetStaticParamsType<typeof getStaticPaths>;
type Props = InferGetStaticPropsType<typeof getStaticPaths>;

const { page } = Astro.props;
---

<Layout
  title={`Blog${page.currentPage > 1 ? ` - Page ${page.currentPage}` : ''}`}
>
  <ol>
    {
      page.data.map((post) => (
        <li>
          <Post limitToExcerpt={true} post={post} />
        </li>
      ))
    }
  </ol>
</Layout>
